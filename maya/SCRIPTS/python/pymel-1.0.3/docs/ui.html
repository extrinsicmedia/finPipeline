

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Building User Interfaces &mdash; PyMEL v1.0.3 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyMEL v1.0.3 documentation" href="index.html" />
    <link rel="next" title="Standalone Maya Python Interpreter" href="standalone.html" />
    <link rel="prev" title="Non-Existent Objects" href="non_existent_objs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="standalone.html" title="Standalone Maya Python Interpreter"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="non_existent_objs.html" title="Non-Existent Objects"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyMEL v1.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="building-user-interfaces">
<h1>Building User Interfaces<a class="headerlink" href="#building-user-interfaces" title="Permalink to this headline">¶</a></h1>
<p>As with Maya nodes, pymel adds the ability to use object-oriented code for building MEL GUIs. Like nodes and
PyNodes, every UI command in maya.cmds has a class counterpart in pymel derived from the base class <tt class="xref py py-obj docutils literal"><span class="pre">PyUI</span></tt>.
There is one class for every UI element type, each with necessary methods to get and set properties.  And as with nodes,
the procedural commands you already know and love are retrofitted to return PyUI classes, so you don&#8217;t have to completely change
the way you code</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">chkBox</span> <span class="o">=</span> <span class="n">checkBox</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;My Checkbox&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
<span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;My Button&quot;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">chkBox</span><span class="o">.</span><span class="n">getValue</span><span class="p">():</span>
        <span class="k">print</span> <span class="s">&quot;Check box is CHECKED!&quot;</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s">&quot;Uncheck&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Check box is UNCHECKED!&quot;</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s">&quot;Check&quot;</span><span class="p">)</span>
<span class="n">btn</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span><span class="n">buttonPressed</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="command-callbacks">
<h2>Command Callbacks<a class="headerlink" href="#command-callbacks" title="Permalink to this headline">¶</a></h2>
<p>One common point of confusion when building UIs with python is command callbacks. There are several different ways to handle
command callbacks on user interface widgets.</p>
<div class="section" id="function-name-as-string">
<h3>Function Name as String<a class="headerlink" href="#function-name-as-string" title="Permalink to this headline">¶</a></h3>
<p>The simplest method of setting up a callback is to pass the name of the callback function as a string. Maya will try to execute this as python code. Here&#8217;s a simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;pressed!&quot;</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span><span class="o">=</span><span class="s">&#39;buttonPressed()&#39;</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
<p>This example works fine if you run it from the script editor, but if you save it into a module, say <tt class="docutils literal"><span class="pre">myModule</span></tt>, and then import that module as normal ( e.g. <tt class="docutils literal"><span class="pre">import</span> <span class="pre">myModule</span></tt> ), it will cease to work (assuming you haven&#8217;t already run it from the script edtior).  This is because the <em>namespace</em> of the function has changed. It can no longer be found as <tt class="docutils literal"><span class="pre">buttonPressed</span></tt>, because from Maya&#8217;s perspective, its new location is <tt class="docutils literal"><span class="pre">myModule.buttonPressed</span></tt>.</p>
<p>There are several solutions to this.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">you can import the contents of <tt class="docutils literal"><span class="pre">myModule</span></tt> directly into the main namespace ( e.g. <tt class="docutils literal"><span class="pre">from</span> <span class="pre">myModule</span> <span class="pre">import</span> <span class="pre">*</span></tt> ). This will allow <tt class="docutils literal"><span class="pre">buttonPressed</span></tt> to be accessed without the namespace. This is not generally recommended.</p>
</li>
<li><p class="first">you can change your script and prefix the function with the module it will be imported from:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">button</span><span class="p">(</span> <span class="n">command</span><span class="o">=</span><span class="s">&quot;myModule.buttonPressed()&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<p>The problem with both of these solutions is that you must ensure that the module is <em>always</em> imported the same way, and, if you plan to share your module with someone, it&#8217;s pretty impossible to do this.</p>
<p>A more robust solution is to include an import command in the string to execute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">button</span> <span class="p">(</span> <span class="n">command</span><span class="o">=</span><span class="s">&quot;import myModule; myModule.buttonPressed()&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Another major limitation with this method is that it is hard to pass parameters to these functions since these
have to be converted into a string representation. This becomes impractical when the parameters are complex objects,
such as dictionaries, lists, or other custom objects.</p>
<p>So, as simple as the string method may seem at first, it&#8217;s can actually be quite a pain. Because of these limitations, this method is not recommended.</p>
</div>
<div class="section" id="function-object">
<h3>Function Object<a class="headerlink" href="#function-object" title="Permalink to this headline">¶</a></h3>
<p>When using this technique, you pass an actual function object instead of a string.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;pressed!&quot;</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span><span class="o">=</span><span class="n">buttonPressed</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The callback function has to be defined before it is passed to the command flag.</p>
</div>
<p>The difference from the previous example is subtle: <tt class="docutils literal"><span class="pre">command=&quot;buttonPressed()&quot;</span></tt> is now <tt class="docutils literal"><span class="pre">command=buttonPressed</span></tt>. The most important thing to realize here is that <tt class="docutils literal"><span class="pre">buttonPressed</span></tt> is not a string, it is an actual python function object. As such, if we had included <tt class="docutils literal"><span class="pre">()</span></tt> ( e.g. <tt class="docutils literal"><span class="pre">command=buttonPressed()</span></tt> ) we would have executed the <tt class="docutils literal"><span class="pre">buttonPressed</span></tt> function immediately, but we don&#8217;t want that to happen yet. By leaving the parentheses off, we are able to hand the function over to the UI element to execute later.  For most commands that support callbacks, Maya recognizes when you are passing a string and when you are passing a function, and it treats each differently when the callback is triggered.</p>
<p>This method is very robust, its primary weakness lies in passing arguments to our function.  To see what I mean, try executing the code above and pressing the button...</p>
<p>...when we press it, we get this error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># TypeError: buttonPressed() takes no arguments (1 given) #</span>
</pre></div>
</div>
<p>Why?! The <a class="reference internal" href="generated/functions/pymel.core.windows/pymel.core.windows.button.html#pymel.core.windows.button" title="pymel.core.windows.button"><tt class="xref py py-obj docutils literal"><span class="pre">button</span></tt></a> UI widget, like many others, automatically passes arguments to your function, whether you want them or not. Sometimes these arguments contain the state of the UI element, such as whether a checkbox is on or off, but in our case they are pretty useless.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The automatic passing of arguments to python callbacks is an attempt to recreate a feature of MEL. When creating callbacks in MEL you can request that your callback procedure be passed an argument when the callback is triggered.  Take the example below:</p>
<div class="highlight-python"><pre>radioButton -changeCommand "myRadButtCB #1";</pre>
</div>
<p class="last">When the callback is executed, the <tt class="docutils literal"><span class="pre">#1</span></tt> gets replaced with the current state of the radioButton: <tt class="docutils literal"><span class="pre">0</span></tt> or <tt class="docutils literal"><span class="pre">1</span></tt>.  Unfortunately, when using python callbacks, you can&#8217;t request which arguments you want, you get them all.</p>
</div>
<p>So, to make our callback work, we need to modify it to accept the argument that the button <tt class="docutils literal"><span class="pre">command</span></tt> callback is passing us:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed!&quot;</span>
</pre></div>
</div>
<p>The tricky part is that different UI elements pass differing numbers of arguments to their callbacks, and some pass none at all.  This is why it is best for your command to use the <tt class="docutils literal"><span class="pre">*args</span></tt> syntax, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed! here are my arguments </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">args</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<p>The asterisk in front of <tt class="docutils literal"><span class="pre">args</span></tt> allows the function to accept any quantity of passed arguments. All of the positional arguments to the function are stored in the variable <tt class="docutils literal"><span class="pre">args</span></tt> (without the <tt class="docutils literal"><span class="pre">*</span></tt>) as a read-only list, known as a tuple. Making it a habit to use this syntax for your callbacks can save you a lot of headache.</p>
<p>Putting it all together:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed!&quot;</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span><span class="o">=</span><span class="n">buttonPressed</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="lambda-functions">
<h3>Lambda Functions<a class="headerlink" href="#lambda-functions" title="Permalink to this headline">¶</a></h3>
<p>The next technique builds on the last by simplifying the following situations:</p>
<blockquote>
<div><ul class="simple">
<li>You want to pass arguments to your callback function other than those automatically sent by the UI element</li>
<li>You&#8217;re using a function that someone else wrote and can&#8217;t add the <tt class="docutils literal"><span class="pre">*args</span></tt> to it</li>
</ul>
</div></blockquote>
<p>For example, I want to pass our <tt class="docutils literal"><span class="pre">buttonPressed</span></tt> function a name argument.  Here&#8217;s how we do this using a lambda function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="n">name</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;chad&#39;</span><span class="p">)</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
<p>So, what exactly is a <a class="reference external" href="http://docs.python.org/reference/expressions.html#lambda">lambda</a>?  It&#8217;s a shorthand way of creating a simple function on one line. It&#8217;s usually used when you need a function but you don&#8217;t need to refer to it later by name, which makes it well suited for callbacks. Combining lambda functions with the lessons we learned above adds more versatility to command callbacks.  You can choose exactly which args you want to pass along.</p>
<p>Let&#8217;s clarify what a lambda is. In the above example, this portion of the code...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;chad&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>...could have been written as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">tempFunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;chad&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We would have then passed <tt class="docutils literal"><span class="pre">tempFunc</span></tt> as the callback:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span> <span class="o">=</span> <span class="n">tempFunc</span> <span class="p">)</span>
</pre></div>
</div>
<p>Instead, we use the lambda to create the function on one line and pass it directly to the <tt class="docutils literal"><span class="pre">command</span></tt> flag.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;chad&#39;</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>The lambda function serves as a mediator between the UI element and our real callback, <tt class="docutils literal"><span class="pre">buttonPressed</span></tt>, giving us control over what arguments will be passed to <tt class="docutils literal"><span class="pre">buttonPressed</span></tt>. In our example, we ignore all the arguments passed by the button and instead opt to pass the string <tt class="docutils literal"><span class="pre">'chad'</span></tt>, however, if the circumstances require it, you could use the arguments in <tt class="docutils literal"><span class="pre">args</span></tt> as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;chad&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
</pre></div>
</div>
<p>In the example above we&#8217;re using the first of the arguments passed by the button (remember, <tt class="docutils literal"><span class="pre">args</span></tt> is a tuple, which is like a list) and passing it on to our callback in addition to the name string.  Keep in mind that for this to work our <tt class="docutils literal"><span class="pre">buttonPressed</span></tt> callback would need to be modified to accept two arguments.</p>
<p>Whew! That was a lot to learn, but unfortunately, this method has a drawback, too. It does not work properly when used in a &#8216;for&#8217; loop.</p>
<p>In the following example, we&#8217;re going to make several buttons. Our intention is that each one will print a different name, but as you will soon see, we won&#8217;t succeed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="n">name</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;chad&#39;</span><span class="p">,</span> <span class="s">&#39;robert&#39;</span><span class="p">,</span> <span class="s">&#39;james&#39;</span> <span class="p">]</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
    <span class="n">button</span><span class="p">(</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">buttonPressed</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
<p>When pressed, all the buttons will print &#8216;james&#8217;. Why is this?   Think of a lambda as a &#8220;live&#8221; object.  It lives there waiting to execute the code it has been given, but the variables in that code are live too, so the value of the variable named <tt class="docutils literal"><span class="pre">character</span></tt> changes with each iteration through the loop, thereby changing the code that lambda is waiting to execute.  What is its value at the end of the loop?  It&#8217;s &#8216;james&#8217;. So all the lambda&#8217;s execute the equivalent of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">buttonPressed</span><span class="p">(</span><span class="s">&#39;james&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To solve this we need to &#8220;pin&#8221; down the value of our variable to keep it from changing.  To do this, pymel provides a <a class="reference internal" href="generated/classes/pymel.core.windows/pymel.core.windows.Callback.html#pymel.core.windows.Callback" title="pymel.core.windows.Callback"><tt class="xref py py-obj docutils literal"><span class="pre">Callback</span></tt></a> object...</p>
</div>
<div class="section" id="callback-objects">
<h3>Callback Objects<a class="headerlink" href="#callback-objects" title="Permalink to this headline">¶</a></h3>
<p>In my experience this method handles all cases reliably and predictably, and solves the &#8216;lambda&#8217; issue described above.
A <a class="reference internal" href="generated/classes/pymel.core.windows/pymel.core.windows.Callback.html#pymel.core.windows.Callback" title="pymel.core.windows.Callback"><tt class="xref py py-obj docutils literal"><span class="pre">Callback</span></tt></a> object is an object that behaves like a function, meaning it can be &#8216;called&#8217; like a regular function.
The Callback object &#8216;wraps&#8217; another function, and also stores the parameters to pass to that function. And, lucky for you, the Callback class is included with pymel.</p>
<p>Here&#8217;s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pymel.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">buttonPressed</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;pressed </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="n">name</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">columnLayout</span><span class="p">()</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;chad&#39;</span><span class="p">,</span> <span class="s">&#39;robert&#39;</span><span class="p">,</span> <span class="s">&#39;james&#39;</span> <span class="p">]</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
    <span class="n">button</span><span class="p">(</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">Callback</span><span class="p">(</span> <span class="n">buttonPressed</span><span class="p">,</span> <span class="n">name</span> <span class="p">)</span> <span class="p">)</span>

<span class="n">showWindow</span><span class="p">()</span>
</pre></div>
</div>
<p>Our example now works as intended.  The <a class="reference internal" href="generated/classes/pymel.core.windows/pymel.core.windows.Callback.html#pymel.core.windows.Callback" title="pymel.core.windows.Callback"><tt class="xref py py-obj docutils literal"><span class="pre">Callback</span></tt></a> class provides the magic that makes it work.</p>
<p>Pay close attention to how the Callback is created:  the first argument, <tt class="docutils literal"><span class="pre">buttonPressed</span></tt>, is the function to wrap, and the rest are arguments to that function. The Callback stores the function and its arguments separately and then combines them when it is called by the UI element.</p>
<p>So, on assignment, something that looks like this...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Callback</span><span class="p">(</span> <span class="n">buttonPressed</span><span class="p">,</span> <span class="n">name</span> <span class="p">)</span>
</pre></div>
</div>
<p>...on execution becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">buttonPressed</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the variable <tt class="docutils literal"><span class="pre">name</span></tt> is the only additional argument, but the Callback class can accept any number of arguments or even keyword arguments, which it will dutifully pass along to your function when the callback is triggered.</p>
<p>The <a class="reference internal" href="generated/classes/pymel.core.windows/pymel.core.windows.Callback.html#pymel.core.windows.Callback" title="pymel.core.windows.Callback"><tt class="xref py py-obj docutils literal"><span class="pre">Callback</span></tt></a> class ignores any arguments passed in from the UI element, so you don&#8217;t have to design your function to take these into account.  However, if you do want these, use the alternate callback object <a class="reference internal" href="generated/classes/pymel.core.windows/pymel.core.windows.CallbackWithArgs.html#pymel.core.windows.CallbackWithArgs" title="pymel.core.windows.CallbackWithArgs"><tt class="xref py py-obj docutils literal"><span class="pre">CallbackWithArgs</span></tt></a> which will pass the UI arguments after yours.</p>
</div>
</div>
<div class="section" id="layouts">
<h2>Layouts<a class="headerlink" href="#layouts" title="Permalink to this headline">¶</a></h2>
<p>One major pain in designing GUIs is the placing of controls in layouts.
Maya provides the formLayout command which lets controls resize and keep their relationship with other controls, however the use of this command is somewhat cumbersome and unintuitive.
Pymel provides an extended FormLayout class, which handles the details of attaching controls to one another automatically:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">formLayout</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;button </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The &#8216;redistribute&#8217; method should now be used to redistributes the children (buttons in this case) evenly in their layout:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">layout</span><span class="o">.</span><span class="n">redistribute</span><span class="p">()</span>
</pre></div>
</div>
<p>A formLayout will align its controls vertically by default. By using the &#8216;verticalLayout&#8217; or &#8216;horizontalLayout&#8217; commands you can explicitly override this (note that both commands still return a FormLayout object):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">horizontalLayout</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;button </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
<span class="n">layout</span><span class="o">.</span><span class="n">redistribute</span><span class="p">()</span>    <span class="c"># now will redistribute horizontally</span>
<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, the control are redistributed evenly but this can be overridden:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">layout</span><span class="o">.</span><span class="n">redistribute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>    <span class="c"># (For 5 elements, the ratios will then be 1:3:2:1:1)</span>
</pre></div>
</div>
<p>You can also specify the ratios at creation time, as well as the spacing between the controls. A ratio of 0 means that the control will not be resized, and will keep a fixed size:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;My Window&quot;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">horizontalLayout</span><span class="p">(</span><span class="n">ratios</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;button </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
<span class="n">layout</span><span class="o">.</span><span class="n">redistribute</span><span class="p">()</span>    <span class="c"># now will redistribute horizontally</span>
<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, just for fun, you can also reset, flip and reverse the layout:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">layout</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>     <span class="c"># flip the orientation</span>
<span class="n">layout</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c"># reverse the order of the controls</span>
<span class="n">layout</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>    <span class="c"># reset the ratios</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Building User Interfaces</a><ul>
<li><a class="reference internal" href="#command-callbacks">Command Callbacks</a><ul>
<li><a class="reference internal" href="#function-name-as-string">Function Name as String</a></li>
<li><a class="reference internal" href="#function-object">Function Object</a></li>
<li><a class="reference internal" href="#lambda-functions">Lambda Functions</a></li>
<li><a class="reference internal" href="#callback-objects">Callback Objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#layouts">Layouts</a></li>
</ul>
</li>
</ul>



  <h4>Previous topic</h4>
  <p class="topless"><a href="non_existent_objs.html"
                        title="previous chapter">Non-Existent Objects</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="standalone.html"
                        title="next chapter">Standalone Maya Python Interpreter</a></p>
<h3><a href="modules.html">Core</a></h3>
<ul>   
	<li><a class="reference external" href="generated/pymel.core.animation.html#module-pymel.core.animation"><tt class="xref">animation</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.effects.html#module-pymel.core.effects"><tt class="xref">effects</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.general.html#module-pymel.core.general"><tt class="xref">general</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.language.html#module-pymel.core.language"><tt class="xref">language</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.modeling.html#module-pymel.core.modeling"><tt class="xref">modeling</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.rendering.html#module-pymel.core.rendering"><tt class="xref">rendering</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.system.html#module-pymel.core.system"><tt class="xref">system</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.windows.html#module-pymel.core.windows"><tt class="xref">windows</tt></a></li>
</ul>
<h3><a href="modules.html">Core Modules</a></h3>
<ul> 
	<li><a class="reference external" href="generated/pymel.core.datatypes.html#module-pymel.core.datatypes"><tt class="xref">datatypes</tt></a></li>
	<li><a class="reference external" href="generated/pymel.core.nodetypes.html#module-pymel.core.nodetypes"><tt class="xref">nodetypes</tt></a></li>  
	<li><a class="reference external" href="generated/pymel.core.uitypes.html#module-pymel.core.uitypes"><tt class="xref">uitypes</tt></a></li>  
</ul>
<h3><a href="modules.html">Other Modules</a></h3>
<ul>
	<li><a class="reference external" href="generated/pymel.api.html#module-pymel.api"><tt class="xref">api</tt></a></li> 
	<li><a class="reference external" href="generated/pymel.mayautils.html#module-pymel.mayautils"><tt class="xref">mayautils</tt></a></li>
	<li><a class="reference external" href="generated/pymel.util.html#module-pymel.util"><tt class="xref">util</tt></a></li>
	<li><a class="reference external" href="generated/pymel.versions.html#module-pymel.versions"><tt class="xref">versions</tt></a></li>
</ul>




<!--
<ul>   
<li><a class="reference external" href="generated/pymel.core.animation.html.html#module-pymel.core.animation"><tt class="xref">animation</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.datatypes.html.html#module-pymel.core.datatypes"><tt class="xref">datatypes</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.effects.html.html#module-pymel.core.effects"><tt class="xref">effects</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.general.html.html#module-pymel.core.general"><tt class="xref">general</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.language.html.html#module-pymel.core.language"><tt class="xref">language</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.modeling.html.html#module-pymel.core.modeling"><tt class="xref">modeling</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.nodetypes.html.html#module-pymel.core.nodetypes"><tt class="xref">nodetypes</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.rendering.html.html#module-pymel.core.rendering"><tt class="xref">rendering</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.system.html.html#module-pymel.core.system"><tt class="xref">system</tt></a></li>
<li><a class="reference external" href="generated/pymel.core.windows.html.html#module-pymel.core.windows"><tt class="xref">windows</tt></a></li>
<li><a class="reference external" href="generated/pymel.util.html.html#module-pymel.util"><tt class="xref">pymel.util</tt></a></li>

</ul>
-->

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ui.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="standalone.html" title="Standalone Maya Python Interpreter"
             >next</a> |</li>
        <li class="right" >
          <a href="non_existent_objs.html" title="Non-Existent Objects"
             >previous</a> |</li>
        <li><a href="index.html">PyMEL v1.0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Chad Dombrova.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>